(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{372:function(t,n,e){"use strict";var r=e(1),a=e.n(r);e(373);n.a=function(t){var n=t.children;return a.a.createElement("h2",{className:"title"},n)}},373:function(t,n,e){},375:function(t,n,e){"use strict";e.d(n,"e",(function(){return h})),e.d(n,"d",(function(){return g})),e.d(n,"b",(function(){return y})),e.d(n,"f",(function(){return m})),e.d(n,"c",(function(){return v})),e.d(n,"a",(function(){return b}));var r=e(103);function a(){var t=d(['\n  query getRegions {\n    Region(filter: { name_not: "Polar" }) {\n      _id,\n      name,\n      subregions {\n        _id\n        name\n        countries(filter: { population_gt: 1 }) {\n          _id,\n          population\n        }\n      }\n    }\n  }\n']);return a=function(){return t},t}function i(){var t=d(['\n  query getCountryBorders {\n    Country(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n      ...CountryData,\n      alpha3Code,\n      borders {\n        alpha3Code\n      }\n    }\n  }\n  ',"\n"]);return i=function(){return t},t}function o(){var t=d(['\n  query getTimezones {\n    Timezone {\n      _id,\n      name,\n      countries(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n        _id,\n        population\n      }\n    }\n  }\n']);return o=function(){return t},t}function u(){var t=d(['\n  query getCountriesArea {\n    Country(filter: { area_lt: 1500000, population_gt: 1, capital_not: "" }) {\n      ...CountryData,\n      area\n    }\n  }\n  ',"\n"]);return u=function(){return t},t}function c(){var t=d(['\n  query getCountriesDensity {\n      Country(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n      ...CountryData\n      alpha3Code,\n      density: populationDensity,\n      population,\n      area\n    }\n  }\n  ',"\n"]);return c=function(){return t},t}function s(){var t=d(["\n  query getCountriesByPopulation($orderBy:[_CountryOrdering]) {\n    Country(orderBy: $orderBy, first: 10, filter: { population_gte: 1 }) {\n      ...CountryData\n      population,\n      populationDensity\n    }\n  }\n  ","\n"]);return s=function(){return t},t}function l(){var t=d(["\n  query getCountryByName($name: String) {\n    Country(name: $name) {\n      area,\n      demonym,\n      name,\n      nativeName,\n      numericCode,\n      capital,\n      officialLanguages {\n        name\n      }\n      population,\n      populationDensity,\n      subregion {\n        name\n      },\n      borders {\n        name\n      }\n      timezones {\n        name\n      }\n    }\n  }\n"]);return l=function(){return t},t}function f(){var t=d(["\n  fragment CountryData on Country {\n    _id,\n    name\n  }\n"]);return f=function(){return t},t}function d(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}var p=Object(r.b)(f()),h=(Object(r.b)(l()),Object(r.b)(s(),p)),g=Object(r.b)(c(),p),y=Object(r.b)(u(),p),m=Object(r.b)(o()),v=Object(r.b)(i(),p),b=Object(r.b)(a())},376:function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));var r=e(374);function a(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var o=function(){function t(n,e,a){var o=e.margins,u=e.height,c=e.width;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"svg",void 0),i(this,"margins",void 0),i(this,"width",void 0),i(this,"height",void 0),i(this,"xAxisGroup",void 0),i(this,"yAxisGroup",void 0),this.margins=o;var s=c||n.clientWidth,l=u||n.clientHeight,f=Math.max(s,1100),d=Math.max(l,a?1100:700);this.width=f-this.margins.left-this.margins.right,this.height=d-this.margins.top-this.margins.bottom,this.svg=r.r(n).append("svg").attr("viewBox","0 0 ".concat(f," ").concat(d)).attr("preserveAspectRatio","xMinYMin meet").append("g"),this.centerChart()}var n,e,o;return n=t,(e=[{key:"addAxisGroups",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.xAxisGroup=this.svg.append("g").classed("axis-group",!0).classed("x-axis-group",!0).attr("transform","translate(0, ".concat(this.height,")"))),n&&(this.yAxisGroup=this.svg.append("g").classed("axis-group",!0).classed("y-axis-group",!0))}},{key:"centerChart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.margins.left,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.margins.top;this.svg.attr("transform","translate(".concat(t,", ").concat(n,")"))}},{key:"wrap",value:function(t,n){t.each((function(){for(var t,e=r.r(this),a=e.text().split(/\s+/).reverse(),i=[],o=0,u=e.attr("y"),c=parseFloat(e.attr("dy")),s=e.text(null).append("tspan").attr("x",0).attr("y",u).attr("dy",c+"em");t=a.pop();)i.push(t),s.text(i.join(" ")),s.node().getComputedTextLength()>n&&(i.pop(),s.text(i.join(" ")),i=[t],s=e.append("tspan").attr("x",0).attr("y",u).attr("dy","".concat(1.1*++o+c,"em")).text(t))}))}},{key:"degToRad",value:function(t){return t*Math.PI/180}},{key:"radToDeg",value:function(t){return 180*t/Math.PI}}])&&a(n.prototype,e),o&&a(n,o),t}()},377:function(t,n,e){"use strict";var r=e(1),a=e.n(r),i=(e(378),Object(r.forwardRef)((function(t,n){var e=t.children,r=t.classNames,i=void 0===r?[]:r;return a.a.createElement("div",{ref:n,className:"chart-wrapper ".concat(i.join(" "))},e)})));n.a=i},378:function(t,n,e){},491:function(t,n,e){"use strict";e.r(n);var r=e(1),a=e.n(r),i=e(370),o=e(372),u=e(375),c=e(374);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return f(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return f(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function d(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,n){return(p=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=m(t);if(n){var a=m(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return g(this,e)}}function g(t,n){return!n||"object"!==s(n)&&"function"!==typeof n?y(t):n}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var b=function(t){!function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p(t,n)}(i,t);var n,e,r,a=h(i);function i(t,n,e){var r;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),(r=a.call(this,t,e)).data=n,v(y(r),"radius",void 0),v(y(r),"colors",["#02c4de","#02b3ca","#02a1b6","#028ea1","#038198","#04738f","#045676","#044862","#03394e","#033447"]),v(y(r),"totalValue",void 0),r.radius=Math.min(r.width,r.height)/2-r.margins.top,r.centerChart(r.width/2+r.margins.left,r.height/2+r.margins.top),r.update(),r}return n=i,(e=[{key:"reduceCountries",value:function(t){return t.reduce((function(t,n){return t+n.population}),0)}},{key:"formatData",value:function(){var t=this,n=this.data.map((function(n){var e=n.subregions.reduce((function(n,e){return n+t.reduceCountries(e.countries)}),0);return{name:n.name,value:e}}));this.totalValue=n.reduce((function(t,n){return t+n.value}),0);var e=n.findIndex((function(t){return"Oceania"===t.name})),r=n.findIndex((function(t){return"Africa"===t.name})),a=n.splice(r,1)[0];n.splice(e,0,a);var i=n.find((function(t){return"Americas"===t.name}));return[].concat(l(n.filter((function(t){return"Americas"!==t.name}))),[{name:"North America",value:.58*i.value},{name:"South America",value:.42*i.value}])}},{key:"update",value:function(){var t=this,n=c.p().domain(this.data.map((function(t){return t.name}))).range(this.colors),e=c.l().sort(null).value((function(t){return t.value})).startAngle(this.degToRad(15)).endAngle(this.degToRad(375))(this.formatData()),r=c.a().innerRadius(.5*this.radius).outerRadius(.8*this.radius),a=c.a().innerRadius(.9*this.radius).outerRadius(.9*this.radius);this.svg.selectAll("path").data(e).join("path").attr("fill",(function(t){return n(t.data.name)})).transition().duration(500).attrTween("d",(function(t){var n=c.i(t.startAngle+.1,t.endAngle);return function(e){return t.endAngle=n(e),r(t)}})).attr("stroke","#edf1f4").style("stroke-width","2px"),this.svg.selectAll("circle").data(e).join("circle").attr("fill","#597a95").attr("cx",(function(t){return r.centroid(t)[0]})).attr("cy",(function(t){return r.centroid(t)[1]})).attr("r",3),this.svg.selectAll("polyline").data(e).join("polyline").attr("stroke","#597a95").attr("fill","none").attr("stroke-width",1).attr("opacity",0).attr("points",(function(n){n.data.name,n.startAngle,Math.PI,n.endAngle,Math.PI;var e=r.centroid(n),i=a.centroid(n),o=a.centroid(n),u=n.startAngle+(n.endAngle-n.startAngle)/2;return u>2*Math.PI&&(u-=2*Math.PI),o[0]=1.25*t.radius*(u<Math.PI?1:-1),[e,i,o]})).transition().duration(500).attr("opacity",1),this.svg.selectAll("text.percentage").data(e).join("text").classed("percentage",!0).text((function(n){return"".concat((n.data.value/t.totalValue*100).toFixed(1),"%")})).attr("font-size",18).attr("font-weight",700).attr("fill","#355c7d").style("text-anchor",(function(t){var n=t.startAngle+(t.endAngle-t.startAngle)/2;return n>2*Math.PI&&(n-=2*Math.PI),n<Math.PI?"end":"start"})).attr("opacity",0).transition().duration(500).attr("transform",(function(n){var e=a.centroid(n),r=n.startAngle+(n.endAngle-n.startAngle)/2;return r>2*Math.PI&&(r-=2*Math.PI),e[0]=1.25*t.radius*(r<Math.PI?1:-1),e[1]=e[1]-5,"translate("+e+")"})).attr("opacity",1),this.svg.selectAll("text.name").data(e).join("text").classed("name",!0).text((function(t){return t.data.name})).attr("font-size",12).attr("fill","#355c7d").attr("font-weight",600).style("text-transform","uppercase").style("text-anchor",(function(t){var n=t.startAngle+(t.endAngle-t.startAngle)/2;return n>2*Math.PI&&(n-=2*Math.PI),n<Math.PI?"end":"start"})).attr("opacity",0).transition().duration(500).attr("transform",(function(n){var e=a.centroid(n),r=n.startAngle+(n.endAngle-n.startAngle)/2;return r>2*Math.PI&&(r-=2*Math.PI),e[0]=1.25*t.radius*(r<Math.PI?1:-1),e[1]=e[1]+20,"translate("+e+")"})).attr("opacity",1)}}])&&d(n.prototype,e),r&&d(n,r),i}(e(376).a),A=e(377),x=function(t){var n=t.data,e=Object(r.useRef)(null),i=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current&&(i.current=new b(e.current,n,{margins:{top:50,right:50,bottom:50,left:50}}))}),[n]),a.a.createElement(A.a,{ref:e})},j=e(60);n.default=function(){var t=Object(i.a)(u.a),n=t.data,e=t.loading;return a.a.createElement("section",null,a.a.createElement(o.a,null,"World population by Continents"),e&&!n&&a.a.createElement(j.a,null),n&&a.a.createElement(x,{data:n.Region}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9VSS9UaXRsZS9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2dxbC9xdWVyaWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9kMy1jaGFydC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DaGFydFdyYXBwZXIvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NoYXJ0cy9Db250aW5lbnRzQ2hhcnQvQ29udGluZW50c0QzQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQ2hhcnRzL0NvbnRpbmVudHNDaGFydC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0NvbnRpbmVudHNQYWdlL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJUaXRsZSIsImNoaWxkcmVuIiwiY2xhc3NOYW1lIiwiY291bnRyeUZyYWdtZW50IiwiZ3FsIiwiR0VUX0NPVU5UUklFU19QT1BVTEFUSU9OIiwiR0VUX0NPVU5UUklFU19ERU5TSVRZIiwiR0VUX0NPVU5UUklFU19BUkVBIiwiR0VUX1RJTUVaT05FUyIsIkdFVF9DT1VOVFJJRVNfQk9SREVSUyIsIkdFVF9DT05USU5FTlRTIiwiRDNDaGFydCIsImVsZW1lbnQiLCJ2ZXJ0aWNhbFNjcmVlbiIsIm1hcmdpbnMiLCJoZWlnaHQiLCJ3aWR0aCIsInRoaXMiLCJzdmdXaWR0aCIsImNsaWVudFdpZHRoIiwic3ZnSGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwidmlld0JveFdpZHRoIiwiTWF0aCIsIm1heCIsInZpZXdCb3hIZWlnaHQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJzdmciLCJkMyIsImFwcGVuZCIsImF0dHIiLCJjZW50ZXJDaGFydCIsIngiLCJ5IiwieEF4aXNHcm91cCIsImNsYXNzZWQiLCJ5QXhpc0dyb3VwIiwidGV4dCIsImVhY2giLCJ3b3JkIiwid29yZHMiLCJzcGxpdCIsInJldmVyc2UiLCJsaW5lIiwibGluZU51bWJlciIsImR5IiwicGFyc2VGbG9hdCIsInRzcGFuIiwicG9wIiwicHVzaCIsImpvaW4iLCJub2RlIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiZGVnIiwiUEkiLCJyYWQiLCJDaGFydFdyYXBwZXIiLCJmb3J3YXJkUmVmIiwicmVmIiwiY2xhc3NOYW1lcyIsIkNvbnRpbmVudHNEM0NoYXJ0IiwiZGF0YSIsImRpbWVuc2lvbnMiLCJyYWRpdXMiLCJtaW4iLCJ1cGRhdGUiLCJjb3VudHJpZXMiLCJyZWR1Y2UiLCJ0b3RhbCIsImNvdW50cnkiLCJwb3B1bGF0aW9uIiwibWFwIiwiZCIsInZhbHVlIiwic3VicmVnaW9ucyIsInN1YiIsInJlZHVjZUNvdW50cmllcyIsIm5hbWUiLCJ0b3RhbFZhbHVlIiwib2NlYW5pYUluZGV4IiwiZmluZEluZGV4IiwiYWZyaWNhSW5kZXgiLCJhZnJpY2EiLCJzcGxpY2UiLCJhbWVyaWNhcyIsImZpbmQiLCJmaWx0ZXIiLCJjb2xvciIsImRvbWFpbiIsInJhbmdlIiwiY29sb3JzIiwic29ydCIsInN0YXJ0QW5nbGUiLCJkZWdUb1JhZCIsImVuZEFuZ2xlIiwicGllIiwiZm9ybWF0RGF0YSIsImFyYyIsImlubmVyUmFkaXVzIiwib3V0ZXJSYWRpdXMiLCJvdXRlckFyYyIsInNlbGVjdEFsbCIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImF0dHJUd2VlbiIsImkiLCJ0Iiwic3R5bGUiLCJjZW50cm9pZCIsInBvc0EiLCJwb3NCIiwicG9zQyIsIm1pZGFuZ2xlIiwidG9GaXhlZCIsInBvcyIsIkNvbnRpbmVudHNDaGFydCIsImNoYXJ0RWxlbWVudFJlZiIsInVzZVJlZiIsImNoYXJ0SW5zdGFuY2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiQ29udGluZW50c1BhZ2UiLCJ1c2VRdWVyeSIsImxvYWRpbmciLCJQcmVsb2FkIiwiUmVnaW9uIl0sIm1hcHBpbmdzIjoiMkZBQUEsMkJBV2VBLElBUlEsU0FBQyxHQUFpQixJQUFmQyxF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QTBDLEdBQ2pCLElBQU0wQyxFQUFNZCxFQUFTUSxTQUFjcEMsR0FDL0J3QyxFQUFXeEMsRUFBRW9CLFlBQWVwQixFQUFFc0IsU0FBV3RCLEVBQUVvQixZQUFjLEVBSTdELE9BSElvQixFQUFZLEVBQUk1RixLQUFLa0MsS0FBSzBELEdBQVksRUFBSTVGLEtBQUtrQyxJQUNuRDRELEVBQUksR0FBbUIsS0FBZCxFQUFLbkQsUUFBaUJpRCxFQUFXNUYsS0FBS2tDLEdBQUssR0FBSyxHQUN6RDRELEVBQUksR0FBS0EsRUFBSSxHQUFLLEdBQ1gsYUFBZUEsRUFBTSxPQUU3QnBGLEtBQUssVUFBVyxRLHFDQS9Kb0J0QixHLFNDeUJoQzJHLEVBcEJ5QyxTQUFDLEdBQWEsSUFBWHRELEVBQVcsRUFBWEEsS0FDbkR1RCxFQUFrQkMsaUJBQXVCLE1BQ3pDQyxFQUFtQkQsaUJBQWlDLE1BYTFELE9BWEFFLHFCQUFVLFdBQ0hILEVBQWdCSSxVQUNyQkYsRUFBaUJFLFFBQVUsSUFBSTVELEVBQzdCd0QsRUFBZ0JJLFFBQ2hCM0QsRUFDQSxDQUNFbEQsUUFBUyxDQUFFYyxJQUFLLEdBQUlELE1BQU8sR0FBSUUsT0FBUSxHQUFJSCxLQUFNLFNBR3BELENBQUNzQyxJQUdGLGtCQUFDTCxFQUFBLEVBQUQsQ0FBY0UsSUFBSzBELEssUUNEUkssVUFYaUIsV0FBTSxNQUNWQyxZQUEwQm5ILEtBQTVDc0QsRUFENEIsRUFDNUJBLEtBQU04RCxFQURzQixFQUN0QkEsUUFDZCxPQUNFLGlDQUNFLGtCQUFDOUgsRUFBQSxFQUFELHVDQUNHOEgsSUFBWTlELEdBQVMsa0JBQUMrRCxFQUFBLEVBQUQsTUFDdEIvRCxHQUFRLGtCQUFDLEVBQUQsQ0FBaUJBLEtBQU1BLEVBQUtnRSIsImZpbGUiOiJzdGF0aWMvanMvMTAuYmU1Y2U2ZWMuY2h1bmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3RpdGxlLnNjc3MnO1xuXG5jb25zdCBUaXRsZTpSZWFjdC5GQyA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8aDIgY2xhc3NOYW1lPVwidGl0bGVcIj5cbiAgICAgIHsgY2hpbGRyZW4gfVxuICAgIDwvaDI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUaXRsZTsiLCJpbXBvcnQgeyBncWwgfSBmcm9tICdhcG9sbG8tYm9vc3QnO1xuXG5jb25zdCBjb3VudHJ5RnJhZ21lbnQgPSBncWxgXG4gIGZyYWdtZW50IENvdW50cnlEYXRhIG9uIENvdW50cnkge1xuICAgIF9pZCxcbiAgICBuYW1lXG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBHRVRfQ09VTlRSWV9CWV9OQU1FID0gZ3FsYFxuICBxdWVyeSBnZXRDb3VudHJ5QnlOYW1lKCRuYW1lOiBTdHJpbmcpIHtcbiAgICBDb3VudHJ5KG5hbWU6ICRuYW1lKSB7XG4gICAgICBhcmVhLFxuICAgICAgZGVtb255bSxcbiAgICAgIG5hbWUsXG4gICAgICBuYXRpdmVOYW1lLFxuICAgICAgbnVtZXJpY0NvZGUsXG4gICAgICBjYXBpdGFsLFxuICAgICAgb2ZmaWNpYWxMYW5ndWFnZXMge1xuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgICBwb3B1bGF0aW9uLFxuICAgICAgcG9wdWxhdGlvbkRlbnNpdHksXG4gICAgICBzdWJyZWdpb24ge1xuICAgICAgICBuYW1lXG4gICAgICB9LFxuICAgICAgYm9yZGVycyB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICAgIHRpbWV6b25lcyB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBHRVRfQ09VTlRSSUVTX1BPUFVMQVRJT04gPSBncWxgXG4gIHF1ZXJ5IGdldENvdW50cmllc0J5UG9wdWxhdGlvbigkb3JkZXJCeTpbX0NvdW50cnlPcmRlcmluZ10pIHtcbiAgICBDb3VudHJ5KG9yZGVyQnk6ICRvcmRlckJ5LCBmaXJzdDogMTAsIGZpbHRlcjogeyBwb3B1bGF0aW9uX2d0ZTogMSB9KSB7XG4gICAgICAuLi5Db3VudHJ5RGF0YVxuICAgICAgcG9wdWxhdGlvbixcbiAgICAgIHBvcHVsYXRpb25EZW5zaXR5XG4gICAgfVxuICB9XG4gICR7Y291bnRyeUZyYWdtZW50fVxuYDtcblxuZXhwb3J0IGNvbnN0IEdFVF9DT1VOVFJJRVNfREVOU0lUWSA9IGdxbGBcbiAgcXVlcnkgZ2V0Q291bnRyaWVzRGVuc2l0eSB7XG4gICAgICBDb3VudHJ5KGZpbHRlcjogeyBhcmVhX2d0OiAxLCBwb3B1bGF0aW9uX2d0OiAxLCBjYXBpdGFsX25vdDogXCJcIiB9KSB7XG4gICAgICAuLi5Db3VudHJ5RGF0YVxuICAgICAgYWxwaGEzQ29kZSxcbiAgICAgIGRlbnNpdHk6IHBvcHVsYXRpb25EZW5zaXR5LFxuICAgICAgcG9wdWxhdGlvbixcbiAgICAgIGFyZWFcbiAgICB9XG4gIH1cbiAgJHtjb3VudHJ5RnJhZ21lbnR9XG5gO1xuXG5leHBvcnQgY29uc3QgR0VUX0NPVU5UUklFU19BUkVBID0gZ3FsYFxuICBxdWVyeSBnZXRDb3VudHJpZXNBcmVhIHtcbiAgICBDb3VudHJ5KGZpbHRlcjogeyBhcmVhX2x0OiAxNTAwMDAwLCBwb3B1bGF0aW9uX2d0OiAxLCBjYXBpdGFsX25vdDogXCJcIiB9KSB7XG4gICAgICAuLi5Db3VudHJ5RGF0YSxcbiAgICAgIGFyZWFcbiAgICB9XG4gIH1cbiAgJHtjb3VudHJ5RnJhZ21lbnR9XG5gO1xuXG5leHBvcnQgY29uc3QgR0VUX1RJTUVaT05FUyA9IGdxbGBcbiAgcXVlcnkgZ2V0VGltZXpvbmVzIHtcbiAgICBUaW1lem9uZSB7XG4gICAgICBfaWQsXG4gICAgICBuYW1lLFxuICAgICAgY291bnRyaWVzKGZpbHRlcjogeyBhcmVhX2d0OiAxLCBwb3B1bGF0aW9uX2d0OiAxLCBjYXBpdGFsX25vdDogXCJcIiB9KSB7XG4gICAgICAgIF9pZCxcbiAgICAgICAgcG9wdWxhdGlvblxuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IEdFVF9DT1VOVFJJRVNfQk9SREVSUyA9IGdxbGBcbiAgcXVlcnkgZ2V0Q291bnRyeUJvcmRlcnMge1xuICAgIENvdW50cnkoZmlsdGVyOiB7IGFyZWFfZ3Q6IDEsIHBvcHVsYXRpb25fZ3Q6IDEsIGNhcGl0YWxfbm90OiBcIlwiIH0pIHtcbiAgICAgIC4uLkNvdW50cnlEYXRhLFxuICAgICAgYWxwaGEzQ29kZSxcbiAgICAgIGJvcmRlcnMge1xuICAgICAgICBhbHBoYTNDb2RlXG4gICAgICB9XG4gICAgfVxuICB9XG4gICR7Y291bnRyeUZyYWdtZW50fVxuYDtcblxuZXhwb3J0IGNvbnN0IEdFVF9DT05USU5FTlRTID0gZ3FsYFxuICBxdWVyeSBnZXRSZWdpb25zIHtcbiAgICBSZWdpb24oZmlsdGVyOiB7IG5hbWVfbm90OiBcIlBvbGFyXCIgfSkge1xuICAgICAgX2lkLFxuICAgICAgbmFtZSxcbiAgICAgIHN1YnJlZ2lvbnMge1xuICAgICAgICBfaWRcbiAgICAgICAgbmFtZVxuICAgICAgICBjb3VudHJpZXMoZmlsdGVyOiB7IHBvcHVsYXRpb25fZ3Q6IDEgfSkge1xuICAgICAgICAgIF9pZCxcbiAgICAgICAgICBwb3B1bGF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbmA7IiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNYXJnaW5zIHtcbiAgdG9wOiBudW1iZXI7XG4gIHJpZ2h0OiBudW1iZXI7XG4gIGJvdHRvbTogbnVtYmVyO1xuICBsZWZ0OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJ0RGltZW5zaW9ucyB7XG4gIG1hcmdpbnM6IElNYXJnaW5zO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBEM1NlbGVjdGlvbiA9IGQzLlNlbGVjdGlvbjxTVkdHRWxlbWVudCwgYW55LCBhbnksIGFueT47IFxuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBEM0NoYXJ0IHtcbiAgcHJvdGVjdGVkIHN2ZzogRDNTZWxlY3Rpb247XG4gIHByb3RlY3RlZCBtYXJnaW5zOklNYXJnaW5zO1xuICBwcm90ZWN0ZWQgd2lkdGg6bnVtYmVyO1xuICBwcm90ZWN0ZWQgaGVpZ2h0Om51bWJlcjtcbiAgcHJvdGVjdGVkIHhBeGlzR3JvdXAhOiBEM1NlbGVjdGlvbjtcbiAgcHJvdGVjdGVkIHlBeGlzR3JvdXAhOiBEM1NlbGVjdGlvbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudCxcbiAgICB7IG1hcmdpbnMsIGhlaWdodCwgd2lkdGggfTogSUNoYXJ0RGltZW5zaW9ucyxcbiAgICB2ZXJ0aWNhbFNjcmVlbj86IGJvb2xlYW5cbiAgKSB7XG4gICAgdGhpcy5tYXJnaW5zID0gbWFyZ2lucztcblxuICAgIGNvbnN0IHN2Z1dpZHRoID0gKHdpZHRoIHx8IGVsZW1lbnQuY2xpZW50V2lkdGgpO1xuICAgIGNvbnN0IHN2Z0hlaWdodCA9IChoZWlnaHQgfHwgZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuXG4gICAgY29uc3Qgdmlld0JveFdpZHRoID0gTWF0aC5tYXgoc3ZnV2lkdGgsIDExMDApO1xuICAgIGNvbnN0IHZpZXdCb3hIZWlnaHQgPSBNYXRoLm1heChzdmdIZWlnaHQsIHZlcnRpY2FsU2NyZWVuID8gMTEwMCA6IDcwMCk7XG5cbiAgICB0aGlzLndpZHRoID0gdmlld0JveFdpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQgLSB0aGlzLm1hcmdpbnMucmlnaHQ7XG4gICAgdGhpcy5oZWlnaHQgPSB2aWV3Qm94SGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcCAtIHRoaXMubWFyZ2lucy5ib3R0b207XG5cbiAgICB0aGlzLnN2ZyA9IFxuICAgICAgZDMuc2VsZWN0KGVsZW1lbnQpXG4gICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBgMCAwICR7dmlld0JveFdpZHRofSAke3ZpZXdCb3hIZWlnaHR9YClcbiAgICAgICAgICAuYXR0cihcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ4TWluWU1pbiBtZWV0XCIpXG4gICAgICAgIC5hcHBlbmQoJ2cnKTtcbiAgICB0aGlzLmNlbnRlckNoYXJ0KCk7XG4gIH1cbiAgXG4gIHByb3RlY3RlZCBhZGRBeGlzR3JvdXBzKHg6IGJvb2xlYW4gPSB0cnVlLCB5OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIGlmICh4KSB7XG4gICAgICB0aGlzLnhBeGlzR3JvdXAgPSB0aGlzLnN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAuY2xhc3NlZCgnYXhpcy1ncm91cCcsIHRydWUpXG4gICAgICAgIC5jbGFzc2VkKCd4LWF4aXMtZ3JvdXAnLCB0cnVlKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCAke3RoaXMuaGVpZ2h0fSlgKTtcbiAgICB9XG4gICAgaWYgKHkpIHtcbiAgICAgIHRoaXMueUF4aXNHcm91cCA9IHRoaXMuc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgIC5jbGFzc2VkKCdheGlzLWdyb3VwJywgdHJ1ZSlcbiAgICAgICAgLmNsYXNzZWQoJ3ktYXhpcy1ncm91cCcsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBjZW50ZXJDaGFydChsZWZ0OiBudW1iZXIgPSB0aGlzLm1hcmdpbnMubGVmdCwgdG9wOiBudW1iZXIgPSB0aGlzLm1hcmdpbnMudG9wKTp2b2lkIHtcbiAgICB0aGlzLnN2Zy5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bGVmdH0sICR7dG9wfSlgKVxuICB9XG5cbiAgcHJvdGVjdGVkIHdyYXAodGV4dDogZDMuU2VsZWN0aW9uPGQzLkJhc2VUeXBlLCB1bmtub3duLCBTVkdHRWxlbWVudCwgYW55Piwgd2lkdGg6IG51bWJlcikge1xuICAgIHRleHQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGxldCB0ZXh0ID0gZDMuc2VsZWN0KHRoaXMpLFxuICAgICAgICAgIHdvcmRzID0gdGV4dC50ZXh0KCkuc3BsaXQoL1xccysvKS5yZXZlcnNlKCksXG4gICAgICAgICAgd29yZCxcbiAgICAgICAgICBsaW5lOiBzdHJpbmdbXSA9IFtdLFxuICAgICAgICAgIGxpbmVOdW1iZXIgPSAwLFxuICAgICAgICAgIGxpbmVIZWlnaHQgPSAxLjEsIC8vIGVtc1xuICAgICAgICAgIHkgPSB0ZXh0LmF0dHIoXCJ5XCIpLFxuICAgICAgICAgIGR5ID0gcGFyc2VGbG9hdCh0ZXh0LmF0dHIoXCJkeVwiKSksXG4gICAgICAgICAgdHNwYW4gPSB0ZXh0LnRleHQobnVsbCkuYXBwZW5kKFwidHNwYW5cIikuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgeSkuYXR0cihcImR5XCIsIGR5ICsgXCJlbVwiKVxuICAgICAgd2hpbGUgKHdvcmQgPSB3b3Jkcy5wb3AoKSkge1xuICAgICAgICBsaW5lLnB1c2god29yZClcbiAgICAgICAgdHNwYW4udGV4dChsaW5lLmpvaW4oXCIgXCIpKVxuICAgICAgICBpZiAodHNwYW4ubm9kZSgpIS5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSA+IHdpZHRoKSB7XG4gICAgICAgICAgbGluZS5wb3AoKVxuICAgICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKFwiIFwiKSlcbiAgICAgICAgICBsaW5lID0gW3dvcmRdXG4gICAgICAgICAgdHNwYW4gPSB0ZXh0LmFwcGVuZChcInRzcGFuXCIpLmF0dHIoXCJ4XCIsIDApLmF0dHIoXCJ5XCIsIHkpLmF0dHIoXCJkeVwiLCBgJHsrK2xpbmVOdW1iZXIgKiBsaW5lSGVpZ2h0ICsgZHl9ZW1gKS50ZXh0KHdvcmQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJvdGVjdGVkIGRlZ1RvUmFkKGRlZzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZGVnICogTWF0aC5QSSAvIDE4MDtcbiAgfVxuXG4gIHByb3RlY3RlZCByYWRUb0RlZyhyYWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHJhZCAqIDE4MCAvIE1hdGguUEk7XG4gIH1cbn0iLCJpbXBvcnQgUmVhY3QsIHsgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi9jaGFydC13cmFwcGVyLnNjc3MnO1xuXG5pbnRlcmZhY2UgSUNoYXJ0V3JhcHBlclByb3BzIHtcbiAgY2xhc3NOYW1lcz86IHN0cmluZ1tdO1xufVxuXG5jb25zdCBDaGFydFdyYXBwZXIgPSBmb3J3YXJkUmVmPEhUTUxEaXZFbGVtZW50LCBJQ2hhcnRXcmFwcGVyUHJvcHM+KCh7IGNoaWxkcmVuLCBjbGFzc05hbWVzID0gW10gfSwgcmVmKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e3JlZn0gY2xhc3NOYW1lPXtgY2hhcnQtd3JhcHBlciAke2NsYXNzTmFtZXMuam9pbignICcpfWB9PlxuICAgICAgeyBjaGlsZHJlbiB9XG4gICAgPC9kaXY+XG4gICk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhcnRXcmFwcGVyOyIsImltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBEM0NoYXJ0LCB7IElDaGFydERpbWVuc2lvbnMgfSBmcm9tICdAZDMtY2hhcnQnO1xuaW1wb3J0IHsgSUNvbnRpbmVudCwgSUNvdW50cnlQb3B1bGF0aW9uIH0gZnJvbSAnQHR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGluZW50c0QzQ2hhcnQgZXh0ZW5kcyBEM0NoYXJ0IHtcbiAgcHJpdmF0ZSByYWRpdXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBjb2xvcnMgPSBbXG4gICAgJyMwMmM0ZGUnLCAnIzAyYjNjYScsICcjMDJhMWI2JywgJyMwMjhlYTEnLCAnIzAzODE5OCcsXG4gICAgJyMwNDczOGYnLCAnIzA0NTY3NicsICcjMDQ0ODYyJywgJyMwMzM5NGUnLCAnIzAzMzQ0NydcbiAgXTtcbiAgcHJpdmF0ZSB0b3RhbFZhbHVlITogbnVtYmVyO1xuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgcHJpdmF0ZSBkYXRhOiBJQ29udGluZW50W10sIGRpbWVuc2lvbnM6IElDaGFydERpbWVuc2lvbnMpIHtcbiAgICBzdXBlcihlbGVtZW50LCBkaW1lbnNpb25zKTtcblxuICAgIHRoaXMucmFkaXVzID0gTWF0aC5taW4odGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpIC8gMiAtIHRoaXMubWFyZ2lucy50b3A7XG4gICAgdGhpcy5jZW50ZXJDaGFydCh0aGlzLndpZHRoIC8gMiArIHRoaXMubWFyZ2lucy5sZWZ0LCB0aGlzLmhlaWdodCAvIDIgKyB0aGlzLm1hcmdpbnMudG9wKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlZHVjZUNvdW50cmllcyhjb3VudHJpZXM6IElDb3VudHJ5UG9wdWxhdGlvbltdKTogbnVtYmVyIHtcbiAgICByZXR1cm4gY291bnRyaWVzLnJlZHVjZSgodG90YWwsIGNvdW50cnkpID0+IHRvdGFsICsgY291bnRyeS5wb3B1bGF0aW9uLCAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0YSgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhLm1hcChkID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlOiBudW1iZXIgPSBkLnN1YnJlZ2lvbnMucmVkdWNlKCh0b3RhbCwgc3ViKSA9PiB0b3RhbCArIHRoaXMucmVkdWNlQ291bnRyaWVzKHN1Yi5jb3VudHJpZXMpLCAwKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZC5uYW1lLFxuICAgICAgICB2YWx1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudG90YWxWYWx1ZSA9IGRhdGEucmVkdWNlKCh0b3RhbCwgZCkgPT4gdG90YWwgKyBkLnZhbHVlLCAwKTtcblxuICAgIGNvbnN0IG9jZWFuaWFJbmRleCA9IGRhdGEuZmluZEluZGV4KGQgPT4gZC5uYW1lID09PSAnT2NlYW5pYScpO1xuICAgIGNvbnN0IGFmcmljYUluZGV4ID0gZGF0YS5maW5kSW5kZXgoZCA9PiBkLm5hbWUgPT09ICdBZnJpY2EnKTtcblxuICAgIGNvbnN0IGFmcmljYSA9IGRhdGEuc3BsaWNlKGFmcmljYUluZGV4LCAxKVswXTtcbiAgICBkYXRhLnNwbGljZShvY2VhbmlhSW5kZXgsIDAsIGFmcmljYSk7XG5cbiAgICBjb25zdCBhbWVyaWNhcyA9IGRhdGEuZmluZChkID0+IGQubmFtZSA9PT0gXCJBbWVyaWNhc1wiKSE7IFxuICAgIHJldHVybiBbXG4gICAgICAuLi5kYXRhLmZpbHRlcihkID0+IGQubmFtZSAhPT0gJ0FtZXJpY2FzJyksXG4gICAgICB7IG5hbWU6IFwiTm9ydGggQW1lcmljYVwiLCB2YWx1ZTogYW1lcmljYXMudmFsdWUgKiAuNTggfSxcbiAgICAgIHsgbmFtZTogXCJTb3V0aCBBbWVyaWNhXCIsIHZhbHVlOiBhbWVyaWNhcy52YWx1ZSAqIC40MiB9XG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlKCkge1xuICAgIGNvbnN0IGNvbG9yID0gZDMuc2NhbGVPcmRpbmFsPHN0cmluZz4oKVxuICAgICAgLmRvbWFpbih0aGlzLmRhdGEubWFwKGQgPT4gZC5uYW1lKSlcbiAgICAgIC5yYW5nZSh0aGlzLmNvbG9ycyk7XG5cbiAgICBjb25zdCBwaWUgPSBkMy5waWU8eyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBudW1iZXIgfT4oKVxuICAgICAgLnNvcnQobnVsbClcbiAgICAgIC52YWx1ZShkID0+IGQudmFsdWUpXG4gICAgICAuc3RhcnRBbmdsZSh0aGlzLmRlZ1RvUmFkKDE1KSlcbiAgICAgIC5lbmRBbmdsZSh0aGlzLmRlZ1RvUmFkKDM3NSkpXG4gICAgY29uc3QgZGF0YSA9IHBpZSh0aGlzLmZvcm1hdERhdGEoKSk7XG5cbiAgICBjb25zdCBhcmMgPSBkMy5hcmMoKVxuICAgICAgLmlubmVyUmFkaXVzKHRoaXMucmFkaXVzICogMC41KVxuICAgICAgLm91dGVyUmFkaXVzKHRoaXMucmFkaXVzICogMC44KVxuXG4gICAgY29uc3Qgb3V0ZXJBcmMgPSBkMy5hcmMoKVxuICAgICAgLmlubmVyUmFkaXVzKHRoaXMucmFkaXVzICogMC45KVxuICAgICAgLm91dGVyUmFkaXVzKHRoaXMucmFkaXVzICogMC45KTtcblxuICAgIHRoaXMuc3ZnLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAuZGF0YShkYXRhKVxuICAgICAgLmpvaW4oJ3BhdGgnKVxuICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3IoZC5kYXRhLm5hbWUpKVxuICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMClcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4ge1xuICAgICAgICAgIGNvbnN0IGkgPSBkMy5pbnRlcnBvbGF0ZShkLnN0YXJ0QW5nbGUgKyAuMSwgZC5lbmRBbmdsZSk7XG4gICAgICAgICAgcmV0dXJuIHQgPT4ge1xuICAgICAgICAgICAgZC5lbmRBbmdsZSA9IGkodCk7XG4gICAgICAgICAgICByZXR1cm4gYXJjKDxhbnk+ZCk7ICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjZWRmMWY0XCIpXG4gICAgICAgIC5zdHlsZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKVxuXG4gICAgdGhpcy5zdmcuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgICAgLmRhdGEoZGF0YSlcbiAgICAgIC5qb2luKCdjaXJjbGUnKVxuICAgICAgICAuYXR0cignZmlsbCcsICcjNTk3YTk1JylcbiAgICAgICAgLmF0dHIoJ2N4JywgZCA9PiBhcmMuY2VudHJvaWQoPGFueT5kKVswXSlcbiAgICAgICAgLmF0dHIoJ2N5JywgZCA9PiBhcmMuY2VudHJvaWQoPGFueT5kKVsxXSlcbiAgICAgICAgLmF0dHIoJ3InLCAzKVxuXG4gICAgdGhpcy5zdmcuc2VsZWN0QWxsKCdwb2x5bGluZScpXG4gICAgICAuZGF0YShkYXRhKVxuICAgICAgLmpvaW4oJ3BvbHlsaW5lJylcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjNTk3YTk1JylcbiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnbm9uZScpXG4gICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxKVxuICAgICAgICAuYXR0cignb3BhY2l0eScsIDApXG4gICAgICAgIC5hdHRyKCdwb2ludHMnLCBkID0+IHtcbiAgICAgICAgICBjb25zdCBhbmdsZXMgPSB7XG4gICAgICAgICAgICBuYW1lOiBkLmRhdGEubmFtZSxcbiAgICAgICAgICAgIHN0YXJ0QW5nbGU6IGQuc3RhcnRBbmdsZSAqIDE4MCAvIE1hdGguUEksXG4gICAgICAgICAgICBlbmRBbmdsZTogZC5lbmRBbmdsZSAqIDE4MCAvIE1hdGguUEkgXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBwb3NBID0gYXJjLmNlbnRyb2lkKDxhbnk+ZCkgLy8gbGluZSBpbnNlcnRpb24gaW4gdGhlIHNsaWNlXG4gICAgICAgICAgY29uc3QgcG9zQiA9IG91dGVyQXJjLmNlbnRyb2lkKDxhbnk+ZCkgLy8gbGluZSBicmVhazogd2UgdXNlIHRoZSBvdGhlciBhcmMgZ2VuZXJhdG9yIHRoYXQgaGFzIGJlZW4gYnVpbHQgb25seSBmb3IgdGhhdFxuICAgICAgICAgIGNvbnN0IHBvc0MgPSBvdXRlckFyYy5jZW50cm9pZCg8YW55PmQpOyAvLyBMYWJlbCBwb3NpdGlvbiA9IGFsbW9zdCB0aGUgc2FtZSBhcyBwb3NCXG4gICAgICAgICAgbGV0IG1pZGFuZ2xlID0gZC5zdGFydEFuZ2xlICsgKChkLmVuZEFuZ2xlIC0gZC5zdGFydEFuZ2xlKSAvIDIpIC8vIHdlIG5lZWQgdGhlIGFuZ2xlIHRvIHNlZSBpZiB0aGUgWCBwb3NpdGlvbiB3aWxsIGJlIGF0IHRoZSBleHRyZW1lIHJpZ2h0IG9yIGV4dHJlbWUgbGVmdFxuICAgICAgICAgIGlmIChtaWRhbmdsZSA+ICgyICogTWF0aC5QSSkpIG1pZGFuZ2xlIC09IDIgKiBNYXRoLlBJO1xuICAgICAgICAgIHBvc0NbMF0gPSB0aGlzLnJhZGl1cyAqIDEuMjUgKiAobWlkYW5nbGUgPCBNYXRoLlBJID8gMSA6IC0xKTsgLy8gbXVsdGlwbHkgYnkgMSBvciAtMSB0byBwdXQgaXQgb24gdGhlIHJpZ2h0IG9yIG9uIHRoZSBsZWZ0XG4gICAgICAgICAgcmV0dXJuIFtwb3NBLCBwb3NCLCBwb3NDXVxuICAgICAgICB9KVxuICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMClcbiAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDEpO1xuICAgIFxuICAgIHRoaXMuc3ZnLnNlbGVjdEFsbCgndGV4dC5wZXJjZW50YWdlJylcbiAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAuam9pbigndGV4dCcpXG4gICAgICAgIC5jbGFzc2VkKCdwZXJjZW50YWdlJywgdHJ1ZSlcbiAgICAgICAgLnRleHQoZCA9PiBgJHsoZC5kYXRhLnZhbHVlL3RoaXMudG90YWxWYWx1ZSoxMDApLnRvRml4ZWQoMSl9JWApXG4gICAgICAgIC5hdHRyKCdmb250LXNpemUnLCAxOClcbiAgICAgICAgLmF0dHIoJ2ZvbnQtd2VpZ2h0JywgNzAwKVxuICAgICAgICAuYXR0cignZmlsbCcsICcjMzU1YzdkJylcbiAgICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsIGQgPT4ge1xuICAgICAgICAgIHZhciBtaWRhbmdsZSA9IGQuc3RhcnRBbmdsZSArICgoZC5lbmRBbmdsZSAtIGQuc3RhcnRBbmdsZSkgLyAyKTtcbiAgICAgICAgICBpZiAobWlkYW5nbGUgPiAoMiAqIE1hdGguUEkpKSBtaWRhbmdsZSAtPSAyICogTWF0aC5QSTtcbiAgICAgICAgICByZXR1cm4gKG1pZGFuZ2xlIDwgTWF0aC5QSSA/ICdlbmQnIDogJ3N0YXJ0JylcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwKVxuICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMClcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBvdXRlckFyYy5jZW50cm9pZCg8YW55PmQpO1xuICAgICAgICAgICAgbGV0IG1pZGFuZ2xlID0gZC5zdGFydEFuZ2xlICsgKChkLmVuZEFuZ2xlIC0gZC5zdGFydEFuZ2xlKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZGFuZ2xlID4gKDIgKiBNYXRoLlBJKSkgbWlkYW5nbGUgLT0gMiAqIE1hdGguUEk7XG4gICAgICAgICAgICBwb3NbMF0gPSB0aGlzLnJhZGl1cyAqIDEuMjUgKiAobWlkYW5nbGUgPCBNYXRoLlBJID8gMSA6IC0xKTtcbiAgICAgICAgICAgIHBvc1sxXSA9IHBvc1sxXSAtIDU7XG4gICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcG9zICsgJyknO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAxKTtcbiAgICAgICAgXG4gICAgdGhpcy5zdmcuc2VsZWN0QWxsKCd0ZXh0Lm5hbWUnKVxuICAgICAgLmRhdGEoZGF0YSlcbiAgICAgIC5qb2luKCd0ZXh0JylcbiAgICAgICAgLmNsYXNzZWQoJ25hbWUnLCB0cnVlKVxuICAgICAgICAudGV4dChkID0+IGQuZGF0YS5uYW1lKVxuICAgICAgICAuYXR0cignZm9udC1zaXplJywgMTIpXG4gICAgICAgIC5hdHRyKCdmaWxsJywgJyMzNTVjN2QnKVxuICAgICAgICAuYXR0cignZm9udC13ZWlnaHQnLCA2MDApXG4gICAgICAgIC5zdHlsZSgndGV4dC10cmFuc2Zvcm0nLCAndXBwZXJjYXNlJylcbiAgICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsIGQgPT4ge1xuICAgICAgICAgIHZhciBtaWRhbmdsZSA9IGQuc3RhcnRBbmdsZSArICgoZC5lbmRBbmdsZSAtIGQuc3RhcnRBbmdsZSkgLyAyKTtcbiAgICAgICAgICBpZiAobWlkYW5nbGUgPiAoMiAqIE1hdGguUEkpKSBtaWRhbmdsZSAtPSAyICogTWF0aC5QSTtcbiAgICAgICAgICByZXR1cm4gKG1pZGFuZ2xlIDwgTWF0aC5QSSA/ICdlbmQnIDogJ3N0YXJ0JylcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwKVxuICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMClcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBvdXRlckFyYy5jZW50cm9pZCg8YW55PmQpO1xuICAgICAgICAgICAgbGV0IG1pZGFuZ2xlID0gZC5zdGFydEFuZ2xlICsgKChkLmVuZEFuZ2xlIC0gZC5zdGFydEFuZ2xlKSAvIDIpO1xuICAgICAgICAgICAgaWYgKG1pZGFuZ2xlID4gKDIgKiBNYXRoLlBJKSkgbWlkYW5nbGUgLT0gMiAqIE1hdGguUEk7XG4gICAgICAgICAgICBwb3NbMF0gPSB0aGlzLnJhZGl1cyAqIDEuMjUgKiAobWlkYW5nbGUgPCBNYXRoLlBJID8gMSA6IC0xKTtcbiAgICAgICAgICAgIHBvc1sxXSA9IHBvc1sxXSArIDIwO1xuICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBvcyArICcpJztcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMSk7XG4gIH1cbn0iLCJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBJQ29udGluZW50IH0gZnJvbSAnQHR5cGVzJztcbmltcG9ydCBDb250aW5lbnRzRDNDaGFydCBmcm9tICcuL0NvbnRpbmVudHNEM0NoYXJ0JztcbmltcG9ydCBDaGFydFdyYXBwZXIgZnJvbSAnQC9DaGFydFdyYXBwZXInO1xuXG5pbnRlcmZhY2UgSUNvbnRpbmVudHNDaGFydFByb3BzIHtcbiAgZGF0YTogSUNvbnRpbmVudFtdO1xufVxuXG5jb25zdCBDb250aW5lbnRzQ2hhcnQ6UmVhY3QuRkM8SUNvbnRpbmVudHNDaGFydFByb3BzPiA9ICh7IGRhdGEgfSkgPT4ge1xuICBjb25zdCBjaGFydEVsZW1lbnRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBjaGFydEluc3RhbmNlUmVmID0gdXNlUmVmPENvbnRpbmVudHNEM0NoYXJ0IHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNoYXJ0RWxlbWVudFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgY2hhcnRJbnN0YW5jZVJlZi5jdXJyZW50ID0gbmV3IENvbnRpbmVudHNEM0NoYXJ0KFxuICAgICAgY2hhcnRFbGVtZW50UmVmLmN1cnJlbnQsXG4gICAgICBkYXRhLFxuICAgICAge1xuICAgICAgICBtYXJnaW5zOiB7IHRvcDogNTAsIHJpZ2h0OiA1MCwgYm90dG9tOiA1MCwgbGVmdDogNTAgfVxuICAgICAgfVxuICAgICk7XG4gIH0sIFtkYXRhXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhcnRXcmFwcGVyIHJlZj17Y2hhcnRFbGVtZW50UmVmfSAvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29udGluZW50c0NoYXJ0OyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0BhcG9sbG8vcmVhY3QtaG9va3MnO1xuaW1wb3J0IFRpdGxlIGZyb20gJ0AvVUkvVGl0bGUnO1xuXG5pbXBvcnQgeyBHRVRfQ09OVElORU5UUyB9IGZyb20gJ0BxdWVyaWVzJztcbmltcG9ydCB7IElDb250aW5lbnQgfSBmcm9tICdAdHlwZXMnO1xuaW1wb3J0IENvbnRpbmVudHNDaGFydCBmcm9tICdAL0NoYXJ0cy9Db250aW5lbnRzQ2hhcnQnO1xuaW1wb3J0IFByZWxvYWQgZnJvbSAnQC9VSS9QcmVsb2FkJztcblxuaW50ZXJmYWNlIElDb250aW5lbnRzRGF0YSB7XG4gIFJlZ2lvbjogSUNvbnRpbmVudFtdO1xufTtcblxuY29uc3QgQ29udGluZW50c1BhZ2U6UmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgbG9hZGluZyB9ID0gdXNlUXVlcnk8SUNvbnRpbmVudHNEYXRhPihHRVRfQ09OVElORU5UUyk7XG4gIHJldHVybiAoXG4gICAgPHNlY3Rpb24+XG4gICAgICA8VGl0bGU+V29ybGQgcG9wdWxhdGlvbiBieSBDb250aW5lbnRzPC9UaXRsZT5cbiAgICAgIHsgKGxvYWRpbmcgJiYgIWRhdGEpICYmIDxQcmVsb2FkIC8+IH1cbiAgICAgIHsgZGF0YSAmJiA8Q29udGluZW50c0NoYXJ0IGRhdGE9e2RhdGEuUmVnaW9ufSAvPiB9XG4gICAgPC9zZWN0aW9uPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29udGluZW50c1BhZ2U7Il0sInNvdXJjZVJvb3QiOiIifQ==