(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{372:function(t,n,e){"use strict";var r=e(1),o=e.n(r);e(373);n.a=function(t){var n=t.children;return o.a.createElement("h2",{className:"title"},n)}},373:function(t,n,e){},375:function(t,n,e){"use strict";e.d(n,"e",(function(){return h})),e.d(n,"d",(function(){return g})),e.d(n,"b",(function(){return y})),e.d(n,"f",(function(){return m})),e.d(n,"c",(function(){return v})),e.d(n,"a",(function(){return b}));var r=e(103);function o(){var t=p(['\n  query getRegions {\n    Region(filter: { name_not: "Polar" }) {\n      _id,\n      name,\n      subregions {\n        _id\n        name\n        countries(filter: { population_gt: 1 }) {\n          _id,\n          population\n        }\n      }\n    }\n  }\n']);return o=function(){return t},t}function a(){var t=p(['\n  query getCountryBorders {\n    Country(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n      ...CountryData,\n      alpha3Code,\n      borders {\n        alpha3Code\n      }\n    }\n  }\n  ',"\n"]);return a=function(){return t},t}function i(){var t=p(['\n  query getTimezones {\n    Timezone {\n      _id,\n      name,\n      countries(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n        _id,\n        population\n      }\n    }\n  }\n']);return i=function(){return t},t}function u(){var t=p(['\n  query getCountriesArea {\n    Country(filter: { area_lt: 1500000, population_gt: 1, capital_not: "" }) {\n      ...CountryData,\n      area\n    }\n  }\n  ',"\n"]);return u=function(){return t},t}function c(){var t=p(['\n  query getCountriesDensity {\n      Country(filter: { area_gt: 1, population_gt: 1, capital_not: "" }) {\n      ...CountryData\n      alpha3Code,\n      density: populationDensity,\n      population,\n      area\n    }\n  }\n  ',"\n"]);return c=function(){return t},t}function s(){var t=p(["\n  query getCountriesByPopulation($orderBy:[_CountryOrdering]) {\n    Country(orderBy: $orderBy, first: 10, filter: { population_gte: 1 }) {\n      ...CountryData\n      population,\n      populationDensity\n    }\n  }\n  ","\n"]);return s=function(){return t},t}function l(){var t=p(["\n  query getCountryByName($name: String) {\n    Country(name: $name) {\n      area,\n      demonym,\n      name,\n      nativeName,\n      numericCode,\n      capital,\n      officialLanguages {\n        name\n      }\n      population,\n      populationDensity,\n      subregion {\n        name\n      },\n      borders {\n        name\n      }\n      timezones {\n        name\n      }\n    }\n  }\n"]);return l=function(){return t},t}function f(){var t=p(["\n  fragment CountryData on Country {\n    _id,\n    name\n  }\n"]);return f=function(){return t},t}function p(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}var d=Object(r.b)(f()),h=(Object(r.b)(l()),Object(r.b)(s(),d)),g=Object(r.b)(c(),d),y=Object(r.b)(u(),d),m=Object(r.b)(i()),v=Object(r.b)(a(),d),b=Object(r.b)(o())},376:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(374);function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var i=function(){function t(n,e,o){var i=e.margins,u=e.height,c=e.width;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"svg",void 0),a(this,"margins",void 0),a(this,"width",void 0),a(this,"height",void 0),a(this,"xAxisGroup",void 0),a(this,"yAxisGroup",void 0),this.margins=i;var s=c||n.clientWidth,l=u||n.clientHeight,f=Math.max(s,1100),p=Math.max(l,o?1100:700);this.width=f-this.margins.left-this.margins.right,this.height=p-this.margins.top-this.margins.bottom,this.svg=r.r(n).append("svg").attr("viewBox","0 0 ".concat(f," ").concat(p)).attr("preserveAspectRatio","xMinYMin meet").append("g"),this.centerChart()}var n,e,i;return n=t,(e=[{key:"addAxisGroups",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.xAxisGroup=this.svg.append("g").classed("axis-group",!0).classed("x-axis-group",!0).attr("transform","translate(0, ".concat(this.height,")"))),n&&(this.yAxisGroup=this.svg.append("g").classed("axis-group",!0).classed("y-axis-group",!0))}},{key:"centerChart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.margins.left,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.margins.top;this.svg.attr("transform","translate(".concat(t,", ").concat(n,")"))}},{key:"wrap",value:function(t,n){t.each((function(){for(var t,e=r.r(this),o=e.text().split(/\s+/).reverse(),a=[],i=0,u=e.attr("y"),c=parseFloat(e.attr("dy")),s=e.text(null).append("tspan").attr("x",0).attr("y",u).attr("dy",c+"em");t=o.pop();)a.push(t),s.text(a.join(" ")),s.node().getComputedTextLength()>n&&(a.pop(),s.text(a.join(" ")),a=[t],s=e.append("tspan").attr("x",0).attr("y",u).attr("dy","".concat(1.1*++i+c,"em")).text(t))}))}},{key:"degToRad",value:function(t){return t*Math.PI/180}},{key:"radToDeg",value:function(t){return 180*t/Math.PI}}])&&o(n.prototype,e),i&&o(n,i),t}()},377:function(t,n,e){"use strict";var r=e(1),o=e.n(r),a=(e(378),Object(r.forwardRef)((function(t,n){var e=t.children,r=t.classNames,a=void 0===r?[]:r;return o.a.createElement("div",{ref:n,className:"chart-wrapper ".concat(a.join(" "))},e)})));n.a=a},378:function(t,n,e){},490:function(t,n,e){"use strict";e.r(n);var r=e(1),o=e.n(r),a=e(370),i=e(372),u=e(375),c=e(374);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function p(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=g(t);if(n){var o=g(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return d(this,e)}}function d(t,n){return!n||"object"!==s(n)&&"function"!==typeof n?h(t):n}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var m=function(t){!function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}(a,t);var n,e,r,o=p(a);function a(t,n,e){var r;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,t,e,t.clientHeight>t.clientWidth)).data=n,y(h(r),"radius",void 0),y(h(r),"getNameByIndex",new Map),y(h(r),"color","#033447"),y(h(r),"chordColor","#045676"),r.radius=Math.min(r.height,r.width)/2.6,r.centerChart(r.width/2+r.margins.left,r.height/2+r.margins.top),r.svg.style("opacity",.1),r.update(),r}return n=a,(e=[{key:"createMatrix",value:function(){var t=this,n=this.data.filter((function(t){return t.borders.length>0}));return n.map((function(n,e){return t.getNameByIndex.set(e,n.name)})),n.map((function(t){var e=t.borders.map((function(t){return t.alpha3Code}));return n.map((function(t){return e.includes(t.alpha3Code)?1:0}))}))}},{key:"update",value:function(){var t=this,n=c.d().padAngle(.05).sortSubgroups(c.e).sortChords(c.e)(this.createMatrix()),e=c.a().innerRadius(this.radius).outerRadius(this.radius+2),r=c.m().radius(this.radius),o=this.svg.append("g").selectAll("g").data(n.groups).join("g"),a=function(n){o.filter((function(t){return t.index!==n.index})).style("opacity",.65),t.svg.selectAll(".chord").filter((function(t){return t.source.index!==n.index&&t.target.index!==n.index})).style("opacity",.1)},i=function(){o.style("opacity",1),t.svg.selectAll(".chord").style("opacity",1)};o.append("path").attr("fill",this.color).attr("stroke",this.color).attr("d",e).on("mouseover",a).on("mouseout",i),o.append("text").each((function(t){t.angle=(t.startAngle+t.endAngle)/2})).attr("dy",".35em").attr("transform",(function(n){return"\n        rotate(".concat(180*n.angle/Math.PI-90,")\n        translate(").concat(t.radius+10,")\n        ").concat(n.angle>Math.PI?"rotate(180)":"","\n      ")})).attr("text-anchor",(function(t){return t.angle>Math.PI?"end":null})).attr("font-size",10).attr("fill",this.color).text((function(n){return t.getNameByIndex.get(n.index)})).on("mouseover",a).on("mouseout",i),this.svg.append("g").attr("fill-opacity",.67).selectAll(".chord").data(n).join("path").classed("chord",!0).attr("stroke",this.chordColor).attr("fill",this.chordColor).attr("d",r).on("mouseover",(function(t){return a(t.source)})).on("mouseout",i),this.svg.transition().duration(600).style("opacity",1)}}])&&l(n.prototype,e),r&&l(n,r),a}(e(376).a),v=e(377),b=function(t){var n=t.data,e=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current&&(a.current=new m(e.current,n,{margins:{top:50,right:50,bottom:50,left:50}}))}),[n]),o.a.createElement(v.a,{ref:e})},x=e(60);n.default=function(){var t=Object(a.a)(u.c),n=t.data,e=t.loading;return o.a.createElement("section",null,o.a.createElement(i.a,null,"Countries by borders. chord diagram"),e&&!n&&o.a.createElement(x.a,null),n&&o.a.createElement(b,{data:n.Country}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9VSS9UaXRsZS9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2dxbC9xdWVyaWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9kMy1jaGFydC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DaGFydFdyYXBwZXIvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NoYXJ0cy9Cb3JkZXJzQ2hhcnQvQm9yZGVyc0QzQ2hhcnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQ2hhcnRzL0JvcmRlcnNDaGFydC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0JvcmRlcnNQYWdlL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJUaXRsZSIsImNoaWxkcmVuIiwiY2xhc3NOYW1lIiwiY291bnRyeUZyYWdtZW50IiwiZ3FsIiwiR0VUX0NPVU5UUklFU19QT1BVTEFUSU9OIiwiR0VUX0NPVU5UUklFU19ERU5TSVRZIiwiR0VUX0NPVU5UUklFU19BUkVBIiwiR0VUX1RJTUVaT05FUyIsIkdFVF9DT1VOVFJJRVNfQk9SREVSUyIsIkdFVF9DT05USU5FTlRTIiwiRDNDaGFydCIsImVsZW1lbnQiLCJ2ZXJ0aWNhbFNjcmVlbiIsIm1hcmdpbnMiLCJoZWlnaHQiLCJ3aWR0aCIsInRoaXMiLCJzdmdXaWR0aCIsImNsaWVudFdpZHRoIiwic3ZnSGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwidmlld0JveFdpZHRoIiwiTWF0aCIsIm1heCIsInZpZXdCb3hIZWlnaHQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJzdmciLCJkMyIsImFwcGVuZCIsImF0dHIiLCJjZW50ZXJDaGFydCIsIngiLCJ5IiwieEF4aXNHcm91cCIsImNsYXNzZWQiLCJ5QXhpc0dyb3VwIiwidGV4dCIsImVhY2giLCJ3b3JkIiwid29yZHMiLCJzcGxpdCIsInJldmVyc2UiLCJsaW5lIiwibGluZU51bWJlciIsImR5IiwicGFyc2VGbG9hdCIsInRzcGFuIiwicG9wIiwicHVzaCIsImpvaW4iLCJub2RlIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiZGVnIiwiUEkiLCJyYWQiLCJDaGFydFdyYXBwZXIiLCJmb3J3YXJkUmVmIiwicmVmIiwiY2xhc3NOYW1lcyIsIkJvcmRlcnNEM0NoYXJ0IiwiZGF0YSIsImRpbWVuc2lvbnMiLCJNYXAiLCJyYWRpdXMiLCJtaW4iLCJzdHlsZSIsInVwZGF0ZSIsImZpbHRlcmVkQ291bnRyaWVzIiwiZmlsdGVyIiwiZCIsImJvcmRlcnMiLCJsZW5ndGgiLCJtYXAiLCJpIiwiZ2V0TmFtZUJ5SW5kZXgiLCJzZXQiLCJuYW1lIiwiYiIsImFscGhhM0NvZGUiLCJtZCIsImluY2x1ZGVzIiwiY2hvcmQiLCJwYWRBbmdsZSIsInNvcnRTdWJncm91cHMiLCJzb3J0Q2hvcmRzIiwiY3JlYXRlTWF0cml4IiwiYXJjIiwiaW5uZXJSYWRpdXMiLCJvdXRlclJhZGl1cyIsInJpYmJvbiIsImciLCJzZWxlY3RBbGwiLCJncm91cHMiLCJvbk1vdXNlT3ZlciIsInNlbGVjdGVkIiwiaW5kZXgiLCJzb3VyY2UiLCJ0YXJnZXQiLCJvbk1vdXNlT3V0IiwiY29sb3IiLCJvbiIsImFuZ2xlIiwic3RhcnRBbmdsZSIsImVuZEFuZ2xlIiwiZ2V0IiwiY2hvcmRDb2xvciIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsIkJvcmRlcnNDaGFydCIsImNoYXJ0RWxlbWVudFJlZiIsInVzZVJlZiIsImNoYXJ0SW5zdGFuY2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiQm9yZGVyc1BhZ2UiLCJ1c2VRdWVyeSIsImxvYWRpbmciLCJQcmVsb2FkIiwiQ291bnRyeSJdLCJtYXBwaW5ncyI6IjBGQUFBLDJCQVdlQSxJQVJRLFNBQUMsR0FBaUIsSUFBZkMsRUFBZSxFQUFmQSxTQUN4QixPQUNFLHdCQUFJQyxVQUFVLFNBQ1ZELEssaWtGQ0pSLElBQU1FLEVBQWtCQyxZQUFILEtBa0NSQyxH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VSxVQUNWL0IsS0FBS3FCLEdBQ0xoQyxLQUFLLFFBQ0hmLFFBQVEsU0FBUyxHQUNqQkwsS0FBSyxTQUFVaEIsS0FBSzRGLFlBQ3BCNUUsS0FBSyxPQUFRaEIsS0FBSzRGLFlBQ2xCNUUsS0FBSyxJQUFVNEQsR0FDZlcsR0FBRyxhQUFhLFNBQUEvQixHQUFDLE9BQUl3QixFQUFZeEIsRUFBRTJCLFdBQ25DSSxHQUFHLFdBQVlGLEdBRXBCckYsS0FBS2EsSUFBSWdGLGFBQWFDLFNBQVMsS0FBSzFDLE1BQU0sVUFBVyxRLHFDQWxHYjFELEcsU0N5QjdCcUcsRUFwQm1DLFNBQUMsR0FBYSxJQUFYaEQsRUFBVyxFQUFYQSxLQUM3Q2lELEVBQWtCQyxpQkFBdUIsTUFDekNDLEVBQW1CRCxpQkFBOEIsTUFhdkQsT0FYQUUscUJBQVUsV0FDSEgsRUFBZ0JJLFVBQ3JCRixFQUFpQkUsUUFBVSxJQUFJdEQsRUFDN0JrRCxFQUFnQkksUUFDaEJyRCxFQUNBLENBQ0VsRCxRQUFTLENBQUVjLElBQUssR0FBSUQsTUFBTyxHQUFJRSxPQUFRLEdBQUlILEtBQU0sU0FHcEQsQ0FBQ3NDLElBR0Ysa0JBQUNMLEVBQUEsRUFBRCxDQUFjRSxJQUFLb0QsSyxRQ0ZSSyxVQVhjLFdBQU0sTUFDUEMsWUFBdUI5RyxLQUF6Q3VELEVBRHlCLEVBQ3pCQSxLQUFNd0QsRUFEbUIsRUFDbkJBLFFBQ2QsT0FDRSxpQ0FDRSxrQkFBQ3hILEVBQUEsRUFBRCw0Q0FDR3dILElBQVl4RCxHQUFTLGtCQUFDeUQsRUFBQSxFQUFELE1BQ3RCekQsR0FBUSxrQkFBQyxFQUFELENBQWNBLEtBQU1BLEVBQUswRCIsImZpbGUiOiJzdGF0aWMvanMvOS5lNWYwNjAwZi5jaHVuay5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgJy4vdGl0bGUuc2Nzcyc7XG5cbmNvbnN0IFRpdGxlOlJlYWN0LkZDID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxoMiBjbGFzc05hbWU9XCJ0aXRsZVwiPlxuICAgICAgeyBjaGlsZHJlbiB9XG4gICAgPC9oMj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRpdGxlOyIsImltcG9ydCB7IGdxbCB9IGZyb20gJ2Fwb2xsby1ib29zdCc7XG5cbmNvbnN0IGNvdW50cnlGcmFnbWVudCA9IGdxbGBcbiAgZnJhZ21lbnQgQ291bnRyeURhdGEgb24gQ291bnRyeSB7XG4gICAgX2lkLFxuICAgIG5hbWVcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IEdFVF9DT1VOVFJZX0JZX05BTUUgPSBncWxgXG4gIHF1ZXJ5IGdldENvdW50cnlCeU5hbWUoJG5hbWU6IFN0cmluZykge1xuICAgIENvdW50cnkobmFtZTogJG5hbWUpIHtcbiAgICAgIGFyZWEsXG4gICAgICBkZW1vbnltLFxuICAgICAgbmFtZSxcbiAgICAgIG5hdGl2ZU5hbWUsXG4gICAgICBudW1lcmljQ29kZSxcbiAgICAgIGNhcGl0YWwsXG4gICAgICBvZmZpY2lhbExhbmd1YWdlcyB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICAgIHBvcHVsYXRpb24sXG4gICAgICBwb3B1bGF0aW9uRGVuc2l0eSxcbiAgICAgIHN1YnJlZ2lvbiB7XG4gICAgICAgIG5hbWVcbiAgICAgIH0sXG4gICAgICBib3JkZXJzIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgICAgdGltZXpvbmVzIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IEdFVF9DT1VOVFJJRVNfUE9QVUxBVElPTiA9IGdxbGBcbiAgcXVlcnkgZ2V0Q291bnRyaWVzQnlQb3B1bGF0aW9uKCRvcmRlckJ5OltfQ291bnRyeU9yZGVyaW5nXSkge1xuICAgIENvdW50cnkob3JkZXJCeTogJG9yZGVyQnksIGZpcnN0OiAxMCwgZmlsdGVyOiB7IHBvcHVsYXRpb25fZ3RlOiAxIH0pIHtcbiAgICAgIC4uLkNvdW50cnlEYXRhXG4gICAgICBwb3B1bGF0aW9uLFxuICAgICAgcG9wdWxhdGlvbkRlbnNpdHlcbiAgICB9XG4gIH1cbiAgJHtjb3VudHJ5RnJhZ21lbnR9XG5gO1xuXG5leHBvcnQgY29uc3QgR0VUX0NPVU5UUklFU19ERU5TSVRZID0gZ3FsYFxuICBxdWVyeSBnZXRDb3VudHJpZXNEZW5zaXR5IHtcbiAgICAgIENvdW50cnkoZmlsdGVyOiB7IGFyZWFfZ3Q6IDEsIHBvcHVsYXRpb25fZ3Q6IDEsIGNhcGl0YWxfbm90OiBcIlwiIH0pIHtcbiAgICAgIC4uLkNvdW50cnlEYXRhXG4gICAgICBhbHBoYTNDb2RlLFxuICAgICAgZGVuc2l0eTogcG9wdWxhdGlvbkRlbnNpdHksXG4gICAgICBwb3B1bGF0aW9uLFxuICAgICAgYXJlYVxuICAgIH1cbiAgfVxuICAke2NvdW50cnlGcmFnbWVudH1cbmA7XG5cbmV4cG9ydCBjb25zdCBHRVRfQ09VTlRSSUVTX0FSRUEgPSBncWxgXG4gIHF1ZXJ5IGdldENvdW50cmllc0FyZWEge1xuICAgIENvdW50cnkoZmlsdGVyOiB7IGFyZWFfbHQ6IDE1MDAwMDAsIHBvcHVsYXRpb25fZ3Q6IDEsIGNhcGl0YWxfbm90OiBcIlwiIH0pIHtcbiAgICAgIC4uLkNvdW50cnlEYXRhLFxuICAgICAgYXJlYVxuICAgIH1cbiAgfVxuICAke2NvdW50cnlGcmFnbWVudH1cbmA7XG5cbmV4cG9ydCBjb25zdCBHRVRfVElNRVpPTkVTID0gZ3FsYFxuICBxdWVyeSBnZXRUaW1lem9uZXMge1xuICAgIFRpbWV6b25lIHtcbiAgICAgIF9pZCxcbiAgICAgIG5hbWUsXG4gICAgICBjb3VudHJpZXMoZmlsdGVyOiB7IGFyZWFfZ3Q6IDEsIHBvcHVsYXRpb25fZ3Q6IDEsIGNhcGl0YWxfbm90OiBcIlwiIH0pIHtcbiAgICAgICAgX2lkLFxuICAgICAgICBwb3B1bGF0aW9uXG4gICAgICB9XG4gICAgfVxuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgR0VUX0NPVU5UUklFU19CT1JERVJTID0gZ3FsYFxuICBxdWVyeSBnZXRDb3VudHJ5Qm9yZGVycyB7XG4gICAgQ291bnRyeShmaWx0ZXI6IHsgYXJlYV9ndDogMSwgcG9wdWxhdGlvbl9ndDogMSwgY2FwaXRhbF9ub3Q6IFwiXCIgfSkge1xuICAgICAgLi4uQ291bnRyeURhdGEsXG4gICAgICBhbHBoYTNDb2RlLFxuICAgICAgYm9yZGVycyB7XG4gICAgICAgIGFscGhhM0NvZGVcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgJHtjb3VudHJ5RnJhZ21lbnR9XG5gO1xuXG5leHBvcnQgY29uc3QgR0VUX0NPTlRJTkVOVFMgPSBncWxgXG4gIHF1ZXJ5IGdldFJlZ2lvbnMge1xuICAgIFJlZ2lvbihmaWx0ZXI6IHsgbmFtZV9ub3Q6IFwiUG9sYXJcIiB9KSB7XG4gICAgICBfaWQsXG4gICAgICBuYW1lLFxuICAgICAgc3VicmVnaW9ucyB7XG4gICAgICAgIF9pZFxuICAgICAgICBuYW1lXG4gICAgICAgIGNvdW50cmllcyhmaWx0ZXI6IHsgcG9wdWxhdGlvbl9ndDogMSB9KSB7XG4gICAgICAgICAgX2lkLFxuICAgICAgICAgIHBvcHVsYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuYDsiLCJpbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1hcmdpbnMge1xuICB0b3A6IG51bWJlcjtcbiAgcmlnaHQ6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIGxlZnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ2hhcnREaW1lbnNpb25zIHtcbiAgbWFyZ2luczogSU1hcmdpbnM7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIEQzU2VsZWN0aW9uID0gZDMuU2VsZWN0aW9uPFNWR0dFbGVtZW50LCBhbnksIGFueSwgYW55PjsgXG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIEQzQ2hhcnQge1xuICBwcm90ZWN0ZWQgc3ZnOiBEM1NlbGVjdGlvbjtcbiAgcHJvdGVjdGVkIG1hcmdpbnM6SU1hcmdpbnM7XG4gIHByb3RlY3RlZCB3aWR0aDpudW1iZXI7XG4gIHByb3RlY3RlZCBoZWlnaHQ6bnVtYmVyO1xuICBwcm90ZWN0ZWQgeEF4aXNHcm91cCE6IEQzU2VsZWN0aW9uO1xuICBwcm90ZWN0ZWQgeUF4aXNHcm91cCE6IEQzU2VsZWN0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIHsgbWFyZ2lucywgaGVpZ2h0LCB3aWR0aCB9OiBJQ2hhcnREaW1lbnNpb25zLFxuICAgIHZlcnRpY2FsU2NyZWVuPzogYm9vbGVhblxuICApIHtcbiAgICB0aGlzLm1hcmdpbnMgPSBtYXJnaW5zO1xuXG4gICAgY29uc3Qgc3ZnV2lkdGggPSAod2lkdGggfHwgZWxlbWVudC5jbGllbnRXaWR0aCk7XG4gICAgY29uc3Qgc3ZnSGVpZ2h0ID0gKGhlaWdodCB8fCBlbGVtZW50LmNsaWVudEhlaWdodCk7XG5cbiAgICBjb25zdCB2aWV3Qm94V2lkdGggPSBNYXRoLm1heChzdmdXaWR0aCwgMTEwMCk7XG4gICAgY29uc3Qgdmlld0JveEhlaWdodCA9IE1hdGgubWF4KHN2Z0hlaWdodCwgdmVydGljYWxTY3JlZW4gPyAxMTAwIDogNzAwKTtcblxuICAgIHRoaXMud2lkdGggPSB2aWV3Qm94V2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCAtIHRoaXMubWFyZ2lucy5yaWdodDtcbiAgICB0aGlzLmhlaWdodCA9IHZpZXdCb3hIZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wIC0gdGhpcy5tYXJnaW5zLmJvdHRvbTtcblxuICAgIHRoaXMuc3ZnID0gXG4gICAgICBkMy5zZWxlY3QoZWxlbWVudClcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsIGAwIDAgJHt2aWV3Qm94V2lkdGh9ICR7dmlld0JveEhlaWdodH1gKVxuICAgICAgICAgIC5hdHRyKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInhNaW5ZTWluIG1lZXRcIilcbiAgICAgICAgLmFwcGVuZCgnZycpO1xuICAgIHRoaXMuY2VudGVyQ2hhcnQoKTtcbiAgfVxuICBcbiAgcHJvdGVjdGVkIGFkZEF4aXNHcm91cHMoeDogYm9vbGVhbiA9IHRydWUsIHk6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgaWYgKHgpIHtcbiAgICAgIHRoaXMueEF4aXNHcm91cCA9IHRoaXMuc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgIC5jbGFzc2VkKCdheGlzLWdyb3VwJywgdHJ1ZSlcbiAgICAgICAgLmNsYXNzZWQoJ3gtYXhpcy1ncm91cCcsIHRydWUpXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsICR7dGhpcy5oZWlnaHR9KWApO1xuICAgIH1cbiAgICBpZiAoeSkge1xuICAgICAgdGhpcy55QXhpc0dyb3VwID0gdGhpcy5zdmcuYXBwZW5kKCdnJylcbiAgICAgICAgLmNsYXNzZWQoJ2F4aXMtZ3JvdXAnLCB0cnVlKVxuICAgICAgICAuY2xhc3NlZCgneS1heGlzLWdyb3VwJywgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGNlbnRlckNoYXJ0KGxlZnQ6IG51bWJlciA9IHRoaXMubWFyZ2lucy5sZWZ0LCB0b3A6IG51bWJlciA9IHRoaXMubWFyZ2lucy50b3ApOnZvaWQge1xuICAgIHRoaXMuc3ZnLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHtsZWZ0fSwgJHt0b3B9KWApXG4gIH1cblxuICBwcm90ZWN0ZWQgd3JhcCh0ZXh0OiBkMy5TZWxlY3Rpb248ZDMuQmFzZVR5cGUsIHVua25vd24sIFNWR0dFbGVtZW50LCBhbnk+LCB3aWR0aDogbnVtYmVyKSB7XG4gICAgdGV4dC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHRleHQgPSBkMy5zZWxlY3QodGhpcyksXG4gICAgICAgICAgd29yZHMgPSB0ZXh0LnRleHQoKS5zcGxpdCgvXFxzKy8pLnJldmVyc2UoKSxcbiAgICAgICAgICB3b3JkLFxuICAgICAgICAgIGxpbmU6IHN0cmluZ1tdID0gW10sXG4gICAgICAgICAgbGluZU51bWJlciA9IDAsXG4gICAgICAgICAgbGluZUhlaWdodCA9IDEuMSwgLy8gZW1zXG4gICAgICAgICAgeSA9IHRleHQuYXR0cihcInlcIiksXG4gICAgICAgICAgZHkgPSBwYXJzZUZsb2F0KHRleHQuYXR0cihcImR5XCIpKSxcbiAgICAgICAgICB0c3BhbiA9IHRleHQudGV4dChudWxsKS5hcHBlbmQoXCJ0c3BhblwiKS5hdHRyKFwieFwiLCAwKS5hdHRyKFwieVwiLCB5KS5hdHRyKFwiZHlcIiwgZHkgKyBcImVtXCIpXG4gICAgICB3aGlsZSAod29yZCA9IHdvcmRzLnBvcCgpKSB7XG4gICAgICAgIGxpbmUucHVzaCh3b3JkKVxuICAgICAgICB0c3Bhbi50ZXh0KGxpbmUuam9pbihcIiBcIikpXG4gICAgICAgIGlmICh0c3Bhbi5ub2RlKCkhLmdldENvbXB1dGVkVGV4dExlbmd0aCgpID4gd2lkdGgpIHtcbiAgICAgICAgICBsaW5lLnBvcCgpXG4gICAgICAgICAgdHNwYW4udGV4dChsaW5lLmpvaW4oXCIgXCIpKVxuICAgICAgICAgIGxpbmUgPSBbd29yZF1cbiAgICAgICAgICB0c3BhbiA9IHRleHQuYXBwZW5kKFwidHNwYW5cIikuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgeSkuYXR0cihcImR5XCIsIGAkeysrbGluZU51bWJlciAqIGxpbmVIZWlnaHQgKyBkeX1lbWApLnRleHQod29yZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcm90ZWN0ZWQgZGVnVG9SYWQoZGVnOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBkZWcgKiBNYXRoLlBJIC8gMTgwO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJhZFRvRGVnKHJhZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcmFkICogMTgwIC8gTWF0aC5QSTtcbiAgfVxufSIsImltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL2NoYXJ0LXdyYXBwZXIuc2Nzcyc7XG5cbmludGVyZmFjZSBJQ2hhcnRXcmFwcGVyUHJvcHMge1xuICBjbGFzc05hbWVzPzogc3RyaW5nW107XG59XG5cbmNvbnN0IENoYXJ0V3JhcHBlciA9IGZvcndhcmRSZWY8SFRNTERpdkVsZW1lbnQsIElDaGFydFdyYXBwZXJQcm9wcz4oKHsgY2hpbGRyZW4sIGNsYXNzTmFtZXMgPSBbXSB9LCByZWYpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17cmVmfSBjbGFzc05hbWU9e2BjaGFydC13cmFwcGVyICR7Y2xhc3NOYW1lcy5qb2luKCcgJyl9YH0+XG4gICAgICB7IGNoaWxkcmVuIH1cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDaGFydFdyYXBwZXI7IiwiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IEQzQ2hhcnQsIHsgSUNoYXJ0RGltZW5zaW9ucyB9IGZyb20gJ0BkMy1jaGFydCc7XG5pbXBvcnQgeyBJQm9yZGVycyB9IGZyb20gJ0B0eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvcmRlcnNEM0NoYXJ0IGV4dGVuZHMgRDNDaGFydCB7XG4gIHByaXZhdGUgcmFkaXVzOiBudW1iZXI7XG4gIHByaXZhdGUgZ2V0TmFtZUJ5SW5kZXg6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwO1xuICBwcml2YXRlIGNvbG9yID0gJyMwMzM0NDcnO1xuICBwcml2YXRlIGNob3JkQ29sb3IgPSAnIzA0NTY3Nic7XG4gIFxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRGl2RWxlbWVudCwgcHJpdmF0ZSBkYXRhOiBJQm9yZGVyc1tdLCBkaW1lbnNpb25zOiBJQ2hhcnREaW1lbnNpb25zKSB7XG4gICAgc3VwZXIoZWxlbWVudCwgZGltZW5zaW9ucywgZWxlbWVudC5jbGllbnRIZWlnaHQgPiBlbGVtZW50LmNsaWVudFdpZHRoKTtcbiAgICB0aGlzLnJhZGl1cyA9IE1hdGgubWluKHRoaXMuaGVpZ2h0LCB0aGlzLndpZHRoKSAvIDIuNjtcbiAgICB0aGlzLmNlbnRlckNoYXJ0KHRoaXMud2lkdGggLyAyICsgdGhpcy5tYXJnaW5zLmxlZnQsIHRoaXMuaGVpZ2h0IC8gMiArIHRoaXMubWFyZ2lucy50b3ApO1xuXG4gICAgdGhpcy5zdmcuc3R5bGUoJ29wYWNpdHknLCAuMSk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVNYXRyaXgoKSB7XG4gICAgY29uc3QgZmlsdGVyZWRDb3VudHJpZXMgPSB0aGlzLmRhdGEuZmlsdGVyKGQgPT4gZC5ib3JkZXJzLmxlbmd0aCA+IDApO1xuICAgIGZpbHRlcmVkQ291bnRyaWVzLm1hcCgoZCwgaSkgPT4gdGhpcy5nZXROYW1lQnlJbmRleC5zZXQoaSwgZC5uYW1lKSk7XG5cbiAgICBjb25zdCBtYXRyaXggPSBmaWx0ZXJlZENvdW50cmllcy5tYXAoZCA9PiB7XG4gICAgICBjb25zdCBib3JkZXJzID0gZC5ib3JkZXJzLm1hcChiID0+IGIuYWxwaGEzQ29kZSk7XG4gICAgICByZXR1cm4gZmlsdGVyZWRDb3VudHJpZXMubWFwKG1kID0+IHtcbiAgICAgICAgaWYgKGJvcmRlcnMuaW5jbHVkZXMobWQuYWxwaGEzQ29kZSkpIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWF0cml4O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoKSB7XG4gICAgY29uc3QgY2hvcmQgPSBkMy5jaG9yZCgpXG4gICAgICAucGFkQW5nbGUoLjA1KVxuICAgICAgLnNvcnRTdWJncm91cHMoZDMuZGVzY2VuZGluZylcbiAgICAgIC5zb3J0Q2hvcmRzKGQzLmRlc2NlbmRpbmcpXG4gICAgICAodGhpcy5jcmVhdGVNYXRyaXgoKSk7XG5cbiAgICBjb25zdCBhcmMgPSBkMy5hcmMoKVxuICAgICAgLmlubmVyUmFkaXVzKHRoaXMucmFkaXVzKVxuICAgICAgLm91dGVyUmFkaXVzKHRoaXMucmFkaXVzICsgMik7XG5cbiAgICBjb25zdCByaWJib24gPSBkMy5yaWJib24oKS5yYWRpdXModGhpcy5yYWRpdXMpO1xuICAgIFxuICAgIGNvbnN0IGcgPSB0aGlzLnN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgLnNlbGVjdEFsbCgnZycpXG4gICAgICAuZGF0YShjaG9yZC5ncm91cHMpXG4gICAgICAuam9pbignZycpO1xuXG4gICAgY29uc3Qgb25Nb3VzZU92ZXIgPSAoc2VsZWN0ZWQ6IGQzLkNob3JkR3JvdXAgKSA9PiB7XG4gICAgICBnLmZpbHRlcihkID0+IGQuaW5kZXggIT09IHNlbGVjdGVkLmluZGV4KVxuICAgICAgLnN0eWxlKCdvcGFjaXR5JywgLjY1KTtcblxuICAgICAgdGhpcy5zdmcuc2VsZWN0QWxsKCcuY2hvcmQnKVxuICAgICAgICAuZmlsdGVyKCBkID0+IChkLnNvdXJjZS5pbmRleCAhPT0gc2VsZWN0ZWQuaW5kZXgpICYmIChkLnRhcmdldC5pbmRleCAhPT0gc2VsZWN0ZWQuaW5kZXgpKVxuICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuMSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25Nb3VzZU91dCA9ICgpID0+IHtcbiAgICAgIGcuc3R5bGUoJ29wYWNpdHknLCAxKTtcbiAgICAgIHRoaXMuc3ZnLnNlbGVjdEFsbCgnLmNob3JkJylcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgfVxuXG4gICAgZy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCB0aGlzLmNvbG9yKVxuICAgICAgLmF0dHIoJ3N0cm9rZScsIHRoaXMuY29sb3IpXG4gICAgICAuYXR0cignZCcsIDxhbnk+YXJjKVxuICAgICAgLm9uKCdtb3VzZW92ZXInLCBvbk1vdXNlT3ZlcilcbiAgICAgIC5vbignbW91c2VvdXQnLCBvbk1vdXNlT3V0KVxuXG4gICAgZy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuZWFjaChkID0+IHsgZC5hbmdsZSA9IChkLnN0YXJ0QW5nbGUgKyBkLmVuZEFuZ2xlKSAvIDI7IH0pXG4gICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGQgPT4gYFxuICAgICAgICByb3RhdGUoJHsoZC5hbmdsZSAqIDE4MCAvIE1hdGguUEkgLSA5MCl9KVxuICAgICAgICB0cmFuc2xhdGUoJHt0aGlzLnJhZGl1cyArIDEwfSlcbiAgICAgICAgJHtkLmFuZ2xlID4gTWF0aC5QSSA/IFwicm90YXRlKDE4MClcIiA6IFwiXCJ9XG4gICAgICBgKVxuICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBkID0+IGQuYW5nbGUgPiBNYXRoLlBJID8gXCJlbmRcIiA6IG51bGwpXG4gICAgICAuYXR0cignZm9udC1zaXplJywgMTApXG4gICAgICAuYXR0cignZmlsbCcsIHRoaXMuY29sb3IpXG4gICAgICAudGV4dChkID0+IHRoaXMuZ2V0TmFtZUJ5SW5kZXguZ2V0KGQuaW5kZXgpISlcbiAgICAgIC5vbignbW91c2VvdmVyJywgb25Nb3VzZU92ZXIpXG4gICAgICAub24oJ21vdXNlb3V0Jywgb25Nb3VzZU91dClcblxuICAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwiZmlsbC1vcGFjaXR5XCIsIDAuNjcpXG4gICAgICAuc2VsZWN0QWxsKFwiLmNob3JkXCIpXG4gICAgICAuZGF0YShjaG9yZClcbiAgICAgIC5qb2luKFwicGF0aFwiKVxuICAgICAgICAuY2xhc3NlZCgnY2hvcmQnLCB0cnVlKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCB0aGlzLmNob3JkQ29sb3IpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCB0aGlzLmNob3JkQ29sb3IpXG4gICAgICAgIC5hdHRyKFwiZFwiLCA8YW55PnJpYmJvbilcbiAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGQgPT4gb25Nb3VzZU92ZXIoZC5zb3VyY2UpKVxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBvbk1vdXNlT3V0KTtcblxuICAgIHRoaXMuc3ZnLnRyYW5zaXRpb24oKS5kdXJhdGlvbig2MDApLnN0eWxlKCdvcGFjaXR5JywgMSlcbiAgfVxufSIsImltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IElCb3JkZXJzIH0gZnJvbSAnQHR5cGVzJztcbmltcG9ydCBCb3JkZXJzRDNDaGFydCBmcm9tICcuL0JvcmRlcnNEM0NoYXJ0JztcbmltcG9ydCBDaGFydFdyYXBwZXIgZnJvbSAnQC9DaGFydFdyYXBwZXInO1xuXG5pbnRlcmZhY2UgSUJvcmRlcnNDaGFydFByb3BzIHtcbiAgZGF0YTogSUJvcmRlcnNbXTtcbn1cblxuY29uc3QgQm9yZGVyc0NoYXJ0OlJlYWN0LkZDPElCb3JkZXJzQ2hhcnRQcm9wcz4gPSAoeyBkYXRhIH0pID0+IHtcbiAgY29uc3QgY2hhcnRFbGVtZW50UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgY2hhcnRJbnN0YW5jZVJlZiA9IHVzZVJlZjxCb3JkZXJzRDNDaGFydCB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjaGFydEVsZW1lbnRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIGNoYXJ0SW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBCb3JkZXJzRDNDaGFydChcbiAgICAgIGNoYXJ0RWxlbWVudFJlZi5jdXJyZW50LFxuICAgICAgZGF0YSxcbiAgICAgIHtcbiAgICAgICAgbWFyZ2luczogeyB0b3A6IDUwLCByaWdodDogNTAsIGJvdHRvbTogNTAsIGxlZnQ6IDUwIH1cbiAgICAgIH1cbiAgICApO1xuICB9LCBbZGF0YV0pXG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhcnRXcmFwcGVyIHJlZj17Y2hhcnRFbGVtZW50UmVmfSAvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQm9yZGVyc0NoYXJ0OyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0BhcG9sbG8vcmVhY3QtaG9va3MnO1xuaW1wb3J0IFRpdGxlIGZyb20gJ0AvVUkvVGl0bGUnO1xuaW1wb3J0IHsgR0VUX0NPVU5UUklFU19CT1JERVJTIH0gZnJvbSAnQHF1ZXJpZXMnO1xuaW1wb3J0IHsgSUJvcmRlcnMgfSBmcm9tICdAdHlwZXMnO1xuaW1wb3J0IEJvcmRlcnNDaGFydCBmcm9tICdAL0NoYXJ0cy9Cb3JkZXJzQ2hhcnQnO1xuaW1wb3J0IFByZWxvYWQgZnJvbSAnQC9VSS9QcmVsb2FkJztcblxuaW50ZXJmYWNlIElCb3JkZXJzRGF0YSB7XG4gIENvdW50cnk6IElCb3JkZXJzW107XG59XG5cbmNvbnN0IEJvcmRlcnNQYWdlOlJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCB7IGRhdGEsIGxvYWRpbmcgfSA9IHVzZVF1ZXJ5PElCb3JkZXJzRGF0YT4oR0VUX0NPVU5UUklFU19CT1JERVJTKTtcbiAgcmV0dXJuIChcbiAgICA8c2VjdGlvbj5cbiAgICAgIDxUaXRsZT5Db3VudHJpZXMgYnkgYm9yZGVycy4gY2hvcmQgZGlhZ3JhbTwvVGl0bGU+XG4gICAgICB7IChsb2FkaW5nICYmICFkYXRhKSAmJiA8UHJlbG9hZCAvPiB9XG4gICAgICB7IGRhdGEgJiYgPEJvcmRlcnNDaGFydCBkYXRhPXtkYXRhLkNvdW50cnl9IC8+IH1cbiAgICA8L3NlY3Rpb24+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCb3JkZXJzUGFnZTsiXSwic291cmNlUm9vdCI6IiJ9